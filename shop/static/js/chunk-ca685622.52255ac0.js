(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca685622"],{"4faa":function(e,t,a){},7943:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("岗位管理")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"search-div"},[a("el-input",{staticClass:"my-input",attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.requestData.rg_name,callback:function(t){e.$set(e.requestData,"rg_name",t)},expression:"requestData.rg_name"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.getList}},[e._v("查询")]),e.$_has("add")?a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.addDialog.visible=!0}}},[e._v("添加")]):e._e()],1),a("div",{staticStyle:{margin:"40px 0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.responseData.data}},[a("el-table-column",{attrs:{prop:"rg_name",label:"岗位名称"}}),a("el-table-column",{attrs:{prop:"creata_time",label:"添加时间"}}),e.$_has("edit")?a("el-table-column",{attrs:{label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66"},on:{change:function(a){return e.isSwitchJob(t.row)}},model:{value:t.row.is_switch,callback:function(a){e.$set(t.row,"is_switch",a)},expression:"scope.row.is_switch"}})]}}],null,!1,2389930407)}):e._e(),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$_has("edit")?a("el-button",{attrs:{type:"text"},on:{click:function(a){e.editDialog.ruleForm.id=t.row.id,e.editDialog.ruleForm.rg_name=t.row.rg_name,e.editDialog.visible=!0}}},[e._v("编辑")]):e._e(),e.$_has("del")?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.deleteJob(t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),a("div",[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.responseData.count},on:{"current-change":e.handleCurrentChange}})],1)]),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"添加岗位",center:"",visible:e.addDialog.visible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.addDialog,"visible",t)}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.addDialog.ruleForm,rules:e.addDialog.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"岗位名称",prop:"rg_name"}},[a("el-input",{model:{value:e.addDialog.ruleForm.rg_name,callback:function(t){e.$set(e.addDialog.ruleForm,"rg_name",t)},expression:"addDialog.ruleForm.rg_name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addJob("ruleForm")}}},[e._v("立即创建")]),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"编辑岗位",center:"",visible:e.editDialog.visible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.editDialog,"visible",t)}}},[a("el-form",{ref:"ruleFormEdit",staticClass:"demo-ruleForm",attrs:{model:e.editDialog.ruleForm,rules:e.editDialog.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"岗位名称",prop:"rg_name"}},[a("el-input",{model:{value:e.editDialog.ruleForm.rg_name,callback:function(t){e.$set(e.editDialog.ruleForm,"rg_name",t)},expression:"editDialog.ruleForm.rg_name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editJob("ruleFormEdit")}}},[e._v("确认编辑")])],1)],1)],1)],1)},r=[],o=a("b775"),n=function(e){return Object(o["a"])({url:"/auth/Admin_grade/getList",method:"post",data:e})},s=function(e){return Object(o["a"])({url:"/auth/Admin_grade/add",method:"post",data:e})},l=function(e){return Object(o["a"])({url:"/auth/Admin_grade/add",method:"post",data:e})},c=function(e){return Object(o["a"])({url:"/auth/Admin_grade/del",method:"post",data:e})},u=function(e){return Object(o["a"])({url:"/auth/Admin_grade/setSwitch",method:"post",data:e})},d={name:"index",data:function(){return{requestData:{page:1,rg_name:""},responseData:{count:0,data:[]},addDialog:{visible:!1,ruleForm:{rg_name:""},rules:{rg_name:[{required:!0,message:"请输入岗位名称",trigger:"blur"}]}},editDialog:{visible:!1,ruleForm:{id:"",rg_name:""},rules:{rg_name:[{required:!0,message:"请输入岗位名称",trigger:"blur"}]}}}},methods:{addJob:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return!1;s(t.addDialog.ruleForm).then((function(a){200===a.code&&(t.resetForm(e),t.addDialog.visible=!1,t.getList(),t.$message.success("新增成功！"))})).catch((function(e){console.log(e)}))}))},resetForm:function(e){this.$refs[e].resetFields()},deleteJob:function(e){var t=this,a={id:e.id};this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){c(a).then((function(e){200===e.code&&(t.getList(),t.$message({type:"success",message:"删除成功!"}))})).catch((function(e){console.log(e),t.$message.error("操作失败")}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleCurrentChange:function(e){this.requestData.page=e,this.getList()},getList:function(){var e=this;n(this.requestData).then((function(t){200===t.code&&(e.responseData=t.data)})).catch((function(e){console.log(e)}))},isSwitchJob:function(e){var t=this,a={id:e.id,is_switch:e.is_switch?1:0};u(a).then((function(a){200===a.code?t.$message.success("操作成功"):e.is_switch=e.is_switch?0:1})).catch((function(e){console.log(e)}))},editJob:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;l(t.editDialog.ruleForm).then((function(e){200===e.code&&(t.editDialog.visible=!1,t.getList(),t.$message.success("编辑成功！"))})).catch((function(e){console.log(e)}))}))}},beforeMount:function(){this.getList()}},m=d,g=(a("8b96"),a("2877")),f=Object(g["a"])(m,i,r,!1,null,"03def096",null);t["default"]=f.exports},"8b96":function(e,t,a){"use strict";var i=a("4faa"),r=a.n(i);r.a},b775:function(e,t,a){"use strict";var i,r=a("bc3a"),o=a.n(r),n=a("5c96"),s=a("4360"),l=o.a.create({baseURL:"http://ddxm661.com:8088",timeout:3e3});l.interceptors.request.use((function(e){return i=n["Loading"].service({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),"/api"===e.baseURL&&(e.baseURL="http://testadmin2.ddxm661.com"),e}),(function(e){return Promise.reject(e)})),l.interceptors.response.use((function(e){if(i.close(),200===e.status)return-1==e.data.code&&(s["a"].commit("setUserInfo",{}),window.localStorage.removeItem("router"),window.location.href="#/login",setTimeout((function(){window.location.reload()}),150)),200!=e.data.code&&(n["Message"].closeAll(),Object(n["Message"])({message:e.data.msg,type:"error"})),e.data;Promise.reject()}),(function(e){return i.close(),Promise.reject(e)})),t["a"]=l}}]);