(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1387a634"],{"0e43":function(e,t,o){},"1af6":function(e,t,o){var a=o("63b6");a(a.S,"Array",{isArray:o("9003")})},"1e31":function(e,t,o){"use strict";var a=o("0e43"),n=o.n(a);n.a},"20fd":function(e,t,o){"use strict";var a=o("d9f6"),n=o("aebd");e.exports=function(e,t,o){t in e?a.f(e,t,n(0,o)):e[t]=o}},"365c":function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return r})),o.d(t,"a",(function(){return s}));var a=o("b775"),n=function(e){return Object(a["a"])({url:"/system/Common/logistics",method:"post",params:e})},r=function(e){return Object(a["a"])({baseURL:"/aShop",url:"/system/Common/selectCompany",method:"post",params:e})},s=function(e){return Object(a["a"])({url:"/system/common/getCustomer",method:"post",params:e})}},"4ff7":function(e,t,o){"use strict";o.d(t,"d",(function(){return n})),o.d(t,"e",(function(){return r})),o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return u})),o.d(t,"c",(function(){return l}));var a=o("b775"),n=function(e){return Object(a["a"])({url:"/warehouse/warehouse_manage/getList",method:"post",data:e})},r=function(e){return Object(a["a"])({url:"/system/common/getWarehouse",method:"post",data:e})},s=function(e){return Object(a["a"])({url:"/warehouse/warehouse_manage/add",method:"post",data:e})},u=function(e){return Object(a["a"])({url:"/warehouse/warehouse_manage/del",method:"post",data:e})},l=function(e){return Object(a["a"])({url:"/warehouse/warehouse_manage/edit",method:"post",data:e})}},"549b":function(e,t,o){"use strict";var a=o("d864"),n=o("63b6"),r=o("241e"),s=o("b0dc"),u=o("3702"),l=o("b447"),i=o("20fd"),c=o("7cd6");n(n.S+n.F*!o("4ee1")((function(e){Array.from(e)})),"Array",{from:function(e){var t,o,n,d,f=r(e),h="function"==typeof this?this:Array,p=arguments.length,_=p>1?arguments[1]:void 0,w=void 0!==_,m=0,b=c(f);if(w&&(_=a(_,p>2?arguments[2]:void 0,2)),void 0==b||h==Array&&u(b))for(t=l(f.length),o=new h(t);t>m;m++)i(o,m,w?_(f[m],m):f[m]);else for(d=b.call(f),o=new h;!(n=d.next()).done;m++)i(o,m,w?s(d,_,[n.value,m],!0):n.value);return o.length=m,o}})},"54a1":function(e,t,o){o("6c1c"),o("1654"),e.exports=o("95d5")},"6c84":function(e,t,o){},"75fc":function(e,t,o){"use strict";var a=o("a745"),n=o.n(a);function r(e){if(n()(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}var s=o("774e"),u=o.n(s),l=o("c8bb"),i=o.n(l);function c(e){if(i()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return u()(e)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(e){return r(e)||c(e)||d()}o.d(t,"a",(function(){return f}))},"774e":function(e,t,o){e.exports=o("d2d5")},"95d5":function(e,t,o){var a=o("40c3"),n=o("5168")("iterator"),r=o("481b");e.exports=o("584a").isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||r.hasOwnProperty(a(t))}},a745:function(e,t,o){e.exports=o("f410")},aa1f:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-cascader",{attrs:{placeholder:e.placeholder,options:e.list,clearable:"",props:{checkStrictly:!0,value:"id",label:"w_name",children:"children"}},on:{change:e.change},model:{value:e.choosesValue,callback:function(t){e.choosesValue=t},expression:"choosesValue"}})},n=[],r=(o("55dd"),o("75fc")),s=o("4ff7"),u={name:"index",props:{placeholder:{type:String,default:"请选择仓库"},value:null},data:function(){return{choosesValue:[],list:[]}},methods:{change:function(){this.$emit("input",this.choosesValue[this.choosesValue.length-1])}},watch:{value:{immediate:!0,handler:function(e){if(e){var t=function e(t,a,n){n.some((function(n){var s=n.children||[];if(n.id===a)return o=t,!0;if(s.length>0){var u=Object(r["a"])(t);return u.push(n.id),e(u,a,s)}}))},o=[];t([],e,this.list),this.choosesValue=[e].concat(Object(r["a"])(o)).sort()}else this.choosesValue=[]}}},beforeCreate:function(){var e=this;Object(s["e"])().then((function(t){200===t.code&&(e.list=t.data)})).catch((function(e){console.log(e)}))}},l=u,i=(o("1e31"),o("2877")),c=Object(i["a"])(l,a,n,!1,null,"1fa4dcec",null);t["default"]=c.exports},c437:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"crumbs"},[o("el-breadcrumb",{attrs:{separator:"/"}},[o("el-breadcrumb-item",[e._v("其他出库单")])],1)],1),o("div",{staticClass:"container"},[o("div",{staticClass:"search-div"},[o("el-input",{staticClass:"my-input",attrs:{placeholder:"商品名/条形码/单号"},model:{value:e.requestData.seach_val,callback:function(t){e.$set(e.requestData,"seach_val",t)},expression:"requestData.seach_val"}}),o("depot",{model:{value:e.requestData.warehouse_id,callback:function(t){e.$set(e.requestData,"warehouse_id",t)},expression:"requestData.warehouse_id"}}),o("el-select",{staticClass:"my-input",attrs:{placeholder:"状态",clearable:""},model:{value:e.requestData.status,callback:function(t){e.$set(e.requestData,"status",t)},expression:"requestData.status"}},[o("el-option",{attrs:{label:"已取消",value:"0"}}),o("el-option",{attrs:{label:"已入库",value:"1"}})],1),o("el-button",{attrs:{type:"primary"},on:{click:e.getList}},[e._v("查询")]),e.$_has("add")?o("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.addDialog.isShow=!0}}},[e._v("新增")]):e._e(),e.$_has("export")?o("el-button",{attrs:{type:"primary",plain:""},on:{click:e.myExport}},[e._v("导出")]):e._e()],1),o("div",{staticStyle:{margin:"40px 0"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.responseData.data,border:""}},[o("el-table-column",{attrs:{prop:"id",label:"ID"}}),o("el-table-column",{attrs:{label:"出库信息",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("p",[e._v("订单号："+e._s(t.row.wo_code))]),o("p",[e._v("出库仓库："+e._s(t.row.w_name))]),o("p",[e._v("出库人："+e._s(t.row.a_username))]),o("p",[e._v("出库时间："+e._s(t.row.create_time))])]}}])}),o("el-table-column",{attrs:{label:"顾客信息",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("p",[e._v("姓名："+e._s(t.row.contacts))]),o("p",[e._v("联系方式："+e._s(t.row.mobile))])]}}])}),o("el-table-column",{attrs:{label:"商品名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.goods,(function(t,a){return o("p",{key:a},[e._v(e._s(t.wo_title))])}))}}])}),o("el-table-column",{attrs:{label:"条形码",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.goods,(function(t,a){return o("p",{key:a},[e._v(e._s(t.wo_bar_code))])}))}}])}),o("el-table-column",{attrs:{label:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.goods,(function(t,a){return o("p",{key:a},[e._v(e._s(t.wo_attr_name))])}))}}])}),o("el-table-column",{attrs:{label:"出库量"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.goods,(function(t,a){return o("p",{key:a},[e._v(e._s(t.wo_num))])}))}}])}),o("el-table-column",{attrs:{label:"出库单价"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.goods,(function(t,a){return o("p",{key:a},[e._v(e._s(t.wo_price))])}))}}])}),o("el-table-column",{attrs:{label:"出库数量"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.goods,(function(t,a){return o("p",{key:a},[e._v(e._s(t.wo_num))])}))}}])}),o("el-table-column",{attrs:{label:"出库总金额"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.goods,(function(t,a){return o("p",{key:a},[e._v(e._s(t.wo_num*t.wo_price))])}))}}])}),o("el-table-column",{attrs:{prop:"desc",label:"备注"}}),o("el-table-column",{attrs:{prop:"status_tilte",label:"状态"}}),o("el-table-column",{attrs:{prop:"is_reconciliation_title",label:"是否对账"}}),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status&&e.$_has("cancel")?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.myCancel(t.row.id)}}},[e._v("取消出库")]):e._e(),0===t.row.is_reconciliation&&e.$_has("reconciliation")?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.myReconciliation(t.row.id)}}},[e._v("对账")]):e._e()]}}])})],1)],1),o("div",[o("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.responseData.total},on:{"current-change":e.handleCurrentChange}})],1)]),o("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"新增其他出库单",center:"",visible:e.addDialog.isShow,width:"50%"},on:{"update:visible":function(t){return e.$set(e.addDialog,"isShow",t)}}},[o("div",{staticClass:"search-div"},[o("depot",{model:{value:e.addDialog.requestData.warehouse_out.warehouse_id,callback:function(t){e.$set(e.addDialog.requestData.warehouse_out,"warehouse_id",t)},expression:"addDialog.requestData.warehouse_out.warehouse_id"}}),o("el-select",{staticClass:"my-input",attrs:{placeholder:"选择客户",clearable:""},model:{value:e.addDialog.requestData.warehouse_out.customer_id,callback:function(t){e.$set(e.addDialog.requestData.warehouse_out,"customer_id",t)},expression:"addDialog.requestData.warehouse_out.customer_id"}},e._l(e.addDialog.responseData,(function(e){return o("el-option",{key:e.id,attrs:{label:e.contacts,value:e.id}})})),1),o("el-input",{staticClass:"my-input",attrs:{placeholder:"请输入备注"},model:{value:e.addDialog.requestData.warehouse_out.desc,callback:function(t){e.$set(e.addDialog.requestData.warehouse_out,"desc",t)},expression:"addDialog.requestData.warehouse_out.desc"}}),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.addDialog.isShow,expression:"addDialog.isShow"}],staticStyle:{margin:"0 0 10px 10px"},attrs:{type:"primary",plain:""},on:{click:function(t){e.addDialog.choosesGoodsDialogIsShow=!0}}},[e._v("选择商品")])],1),o("el-table",{staticStyle:{width:"100%"},attrs:{height:"300",data:e.addDialog.requestData.warehouse_out_goods}},[o("el-table-column",{attrs:{label:"序号",type:"index"}}),o("el-table-column",{attrs:{prop:"wo_bar_code",label:"条形码"}}),o("el-table-column",{attrs:{prop:"wo_title",label:"商品名称"}}),o("el-table-column",{attrs:{label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("el-image",{attrs:{src:e.row.wo_pic,"preview-src-list":[e.row.wo_pic]}})]}}])}),o("el-table-column",{attrs:{prop:"wo_attr_name",label:"规格"}}),o("el-table-column",{attrs:{prop:"kuchun",label:"库存"}}),o("el-table-column",{attrs:{label:"出库单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.wo_price,callback:function(o){e.$set(t.row,"wo_price",o)},expression:"scope.row.wo_price"}})]}}])}),o("el-table-column",{attrs:{label:"出库数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.wo_num,callback:function(o){e.$set(t.row,"wo_num",o)},expression:"scope.row.wo_num"}})]}}])}),o("el-table-column",{attrs:{label:"合计金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.wo_num*t.row.wo_price||0)+"\n                ")]}}])}),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.addDialogDelGoods(t.$index)}}},[e._v("删除")])]}}])})],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"info"},on:{click:function(t){e.addDialog.isShow=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.addDialogSubmit}},[e._v("提交")])],1)],1),o("chooses-goods",{attrs:{visible:e.addDialog.choosesGoodsDialogIsShow},on:{"update:visible":function(t){return e.$set(e.addDialog,"choosesGoodsDialogIsShow",t)},sendChoosesGoods:e.addDialogGetChoosesGoods}})],1)},n=[],r=(o("ac4d"),o("8a81"),o("ac6a"),o("75fc")),s=o("b775"),u=function(e){return Object(s["a"])({url:"/warehouse/warehouse_out/getList",method:"post",data:e})},l=function(e){return Object(s["a"])({url:"/warehouse/warehouse_out/add",method:"post",data:e})},i=function(e){return Object(s["a"])({url:"/warehouse/warehouse_out/cancel",method:"post",data:e})},c=function(e){return Object(s["a"])({url:"/warehouse/warehousing_entry/export",method:"post",data:e})},d=function(e){return Object(s["a"])({url:"/warehouse/warehouse_out/reconciliation",method:"post",data:e})},f=o("365c"),h=o("aa1f"),p=o("89ed"),_=o("ed08"),w={name:"index",data:function(){return{responseData:{total:0,per_page:10,current_page:1,last_page:1,data:[]},requestData:{page:1,limit:10,seach_val:"",warehouse_id:"",status:""},addDialog:{isShow:!1,responseData:[],requestData:{warehouse_out_goods:[],warehouse_out:{customer_id:"",warehouse_id:"",desc:""}},choosesGoodsDialogIsShow:!1}}},methods:{getList:function(){var e=this;u(this.requestData).then((function(t){200===t.code&&(e.responseData=t.data)})).catch((function(e){console.log(e)}))},handleCurrentChange:function(e){this.requestData.page=e,this.getList()},myExport:function(){c().then((function(e){Object(_["a"])(e,"file.xlsx")}))},myCancel:function(e){var t=this;this.$confirm("你正在取消其他出库操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i({id:e}).then((function(e){200===e.code&&(t.getList(),t.$message({type:"success",message:"取消成功!"}))})).catch((function(e){console.log(e)}))})).catch((function(){}))},myReconciliation:function(e){var t=this;this.$confirm("你正在对该出库单做对账操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){d({id:e}).then((function(e){200===e.code&&(t.getList(),t.$message({type:"success",message:"对账成功!"}))})).catch((function(e){console.log(e)}))})).catch((function(){}))},addDialogGetChoosesGoods:function(e){var t=[],o=[],a=!0,n=!1,s=void 0;try{for(var u,l=e[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var i=u.value;t.push({goods_id:i.id,wo_title:i.g_title,wo_pic:i.imgurl,wo_attr_ids:i.key||0,wo_attr_name:i.key_name,wo_bar_code:i.code,kuchun:i.w_stock,wo_price:"",wo_num:""})}}catch(d){n=!0,s=d}finally{try{a||null==l.return||l.return()}finally{if(n)throw s}}o=[].concat(Object(r["a"])(this.addDialog.requestData.warehouse_out_goods),t);var c={};this.addDialog.requestData.warehouse_out_goods=o.reduce((function(e,t){return!c[t.goods_id+t.wo_attr_ids]&&(c[t.goods_id+t.wo_attr_ids]=e.push(t)),e}),[])},addDialogDelGoods:function(e){this.addDialog.requestData.warehouse_out_goods.splice(e,1)},addDialogSubmit:function(){var e=this;if(this.addDialog.requestData.warehouse_out.customer_id)if(this.addDialog.requestData.warehouse_out.warehouse_id)if(0!==this.addDialog.requestData.warehouse_out_goods.length){var t=!0,o=!0,a=!1,n=void 0;try{for(var r,s=this.addDialog.requestData.warehouse_out_goods[Symbol.iterator]();!(o=(r=s.next()).done);o=!0){var u=r.value;if(!u.wo_price){t=!1,this.$message.error("【".concat(u.wo_title,"】的出库单价有误"));break}if(!u.wo_num){t=!1,this.$message.error("【".concat(u.wo_title,"】的出库数量有误"));break}}}catch(i){a=!0,n=i}finally{try{o||null==s.return||s.return()}finally{if(a)throw n}}t&&l(this.addDialog.requestData).then((function(t){200===t.code&&(e.getList(),e.addDialog.isShow=!1,e.addDialog.requestData={warehouse_out_goods:[],warehouse_out:{customer_id:"",warehouse_id:"",desc:""}})})).catch((function(e){console.log(e)}))}else this.$message.error("请至少选择一个商品");else this.$message.error("请选择仓库");else this.$message.error("请选择客户")}},created:function(){var e=this;this.getList(),Object(f["a"])().then((function(t){200===t.code&&(e.addDialog.responseData=t.data)})).catch((function(e){console.log(e)}))},components:{depot:h["default"],choosesGoods:p["default"]}},m=w,b=(o("fb12"),o("2877")),g=Object(b["a"])(m,a,n,!1,null,"641a6ed4",null);t["default"]=g.exports},c8bb:function(e,t,o){e.exports=o("54a1")},d2d5:function(e,t,o){o("1654"),o("549b"),e.exports=o("584a").Array.from},ed08:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var a=function(e,t){var o=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.style.display="none",a.href=o,a.setAttribute("download",t),document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a)}),3e3)}},f410:function(e,t,o){o("1af6"),e.exports=o("584a").Array.isArray},fb12:function(e,t,o){"use strict";var a=o("6c84"),n=o.n(a);n.a}}]);