(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-320d2932","chunk-d8ea59f4","chunk-4d41fe26"],{"01d1":function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return i}));var a=n("b775"),r=function(e){return Object(a["a"])({url:"/warehouse/supplier_manage/getList",method:"post",data:e})},o=function(e){return Object(a["a"])({url:"/system/common/getSupplier",method:"post",data:e})},u=function(e){return Object(a["a"])({url:"/warehouse/supplier_manage/add",method:"post",data:e})},c=function(e){return Object(a["a"])({url:"/warehouse/supplier_manage/del",method:"post",data:e})},i=function(e){return Object(a["a"])({url:"/warehouse/supplier_manage/edit",method:"post",data:e})}},"0e43":function(e,t,n){},"11fe":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"crumbs"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[e._v("采购记录")])],1)],1),n("div",{staticClass:"container"},[n("div",{staticClass:"search-div"},[n("supplier",{model:{value:e.requestData.sup_id,callback:function(t){e.$set(e.requestData,"sup_id",t)},expression:"requestData.sup_id"}}),n("el-select",{staticClass:"my-input",attrs:{placeholder:"是否先打款",clearable:""},model:{value:e.requestData.is_price_firse,callback:function(t){e.$set(e.requestData,"is_price_firse",t)},expression:"requestData.is_price_firse"}},[n("el-option",{attrs:{label:"是",value:"1"}}),n("el-option",{attrs:{label:"否",value:"0"}})],1),n("el-select",{staticClass:"my-input",attrs:{placeholder:"发货方式",clearable:""},model:{value:e.requestData.pick_way,callback:function(t){e.$set(e.requestData,"pick_way",t)},expression:"requestData.pick_way"}},[n("el-option",{attrs:{label:"自提",value:"2"}}),n("el-option",{attrs:{label:"发给仓库",value:"1"}}),n("el-option",{attrs:{label:"发给客户",value:"3"}})],1),n("el-date-picker",{staticStyle:{"margin-right":"10px"},attrs:{"value-format":"yyyy-MM-dd",type:"datetimerange","range-separator":"至","start-placeholder":"采购开始时间","end-placeholder":"采购结束时间"},on:{change:e.changeRequestTime},model:{value:e.requestData.time,callback:function(t){e.$set(e.requestData,"time",t)},expression:"requestData.time"}}),n("el-button",{attrs:{type:"primary"},on:{click:e.getList}},[e._v("搜索")]),n("el-button",{attrs:{type:"primary",plain:""}},[e._v("导出")])],1),n("div",{staticStyle:{margin:"40px 0"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.responseData.data}},[n("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),n("el-table-column",{attrs:{label:"采购单信息",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v("采购人："+e._s(t.row.user_name))]),n("div",[e._v("采购单ID："+e._s(t.row.id))]),n("div",[e._v("采购单订单编号："+e._s(t.row.sn))]),n("div",[e._v("采购时间："+e._s(t.row.create_time))])]}}])}),n("el-table-column",{attrs:{label:"供应商",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v("供应商："+e._s(t.row.sup_name))]),n("div",[e._v("是否先打款："+e._s(t.row.price_firse))]),n("div",[e._v("采购到达："+e._s(t.row.pick_way_name))])]}}])}),n("el-table-column",{attrs:{label:"商品条形码",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.items,(function(t,a){return n("div",{key:a},[e._v(e._s(t.bar_code))])}))}}])}),n("el-table-column",{attrs:{label:"商品名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.items,(function(t,a){return n("div",{key:a},[e._v(e._s(t.title))])}))}}])}),n("el-table-column",{attrs:{label:"商品规格"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.items,(function(t,a){return n("div",{key:a},[e._v(e._s(t.attr_name))])}))}}])}),n("el-table-column",{attrs:{label:"采购单价"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.items,(function(t,a){return n("div",{key:a},[e._v(e._s(t.price))])}))}}])}),n("el-table-column",{attrs:{label:"采购数量"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.items,(function(t,a){return n("div",{key:a},[e._v(e._s(t.num))])}))}}])}),n("el-table-column",{attrs:{label:"退货数量"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.items,(function(t,a){return n("div",{key:a},[e._v(e._s(t.refund_num))])}))}}])}),n("el-table-column",{attrs:{label:"合计金额"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.items,(function(t,a){return n("div",{key:a},[e._v(e._s(t.amount))])}))}}])}),n("el-table-column",{attrs:{prop:"postage",label:"运费"}}),n("el-table-column",{attrs:{prop:"remarks",label:"备注"}}),n("el-table-column",{attrs:{prop:"status_name",label:"状态"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.cancel(t.row)}}},[e._v("取消采购")])]}}])})],1)],1),n("div",[n("el-pagination",{attrs:{total:e.responseData.count,background:"",layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)])])},r=[],o=n("5cf9"),u=n("aa1f"),c=n("57f5"),i={name:"index",data:function(){return{requestData:{sup_id:"",is_price_firse:"",time:"",start_time:"",end_time:"",pick_way:"",page:1,limit:10},responseData:{count:0,data:[]}}},methods:{changeRequestTime:function(e){this.requestData.start_time=e[0],this.requestData.end_time=e[1]},getList:function(){var e=this;Object(c["a"])(this.requestData).then((function(t){200===t.code&&(e.responseData=t.data)})).catch((function(e){console.log(e)}))},handleCurrentChange:function(e){this.requestData.page=e,this.getList()},cancel:function(e){var t=this,n={id:e.id};this.$confirm("此操作将取消该采购单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["b"])(n).then((function(e){200===e.code&&(t.$message.success("取消成功"),t.getList())})).catch((function(e){console.log(e)}))})).catch((function(){t.$message({type:"info",message:"已取消取消采购单操作！"})}))}},components:{supplier:o["default"],depot:u["default"]},beforeMount:function(){this.getList()}},s=i,l=(n("3869"),n("2877")),d=Object(l["a"])(s,a,r,!1,null,"591c3b76",null);t["default"]=d.exports},"1af6":function(e,t,n){var a=n("63b6");a(a.S,"Array",{isArray:n("9003")})},"1e31":function(e,t,n){"use strict";var a=n("0e43"),r=n.n(a);r.a},"20fd":function(e,t,n){"use strict";var a=n("d9f6"),r=n("aebd");e.exports=function(e,t,n){t in e?a.f(e,t,r(0,n)):e[t]=n}},3702:function(e,t,n){var a=n("481b"),r=n("5168")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||o[r]===e)}},3869:function(e,t,n){"use strict";var a=n("49179"),r=n.n(a);r.a},"40c3":function(e,t,n){var a=n("6b4c"),r=n("5168")("toStringTag"),o="Arguments"==a(function(){return arguments}()),u=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,c;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=u(t=Object(e),r))?n:o?a(t):"Object"==(c=a(t))&&"function"==typeof t.callee?"Arguments":c}},49179:function(e,t,n){},"4ee1":function(e,t,n){var a=n("5168")("iterator"),r=!1;try{var o=[7][a]();o["return"]=function(){r=!0},Array.from(o,(function(){throw 2}))}catch(u){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],c=o[a]();c.next=function(){return{done:n=!0}},o[a]=function(){return c},e(o)}catch(u){}return n}},"4ff7":function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return i}));var a=n("b775"),r=function(e){return Object(a["a"])({url:"/warehouse/warehouse_manage/getList",method:"post",data:e})},o=function(e){return Object(a["a"])({url:"/system/common/getWarehouse",method:"post",data:e})},u=function(e){return Object(a["a"])({url:"/warehouse/warehouse_manage/add",method:"post",data:e})},c=function(e){return Object(a["a"])({url:"/warehouse/warehouse_manage/del",method:"post",data:e})},i=function(e){return Object(a["a"])({url:"/warehouse/warehouse_manage/edit",method:"post",data:e})}},"549b":function(e,t,n){"use strict";var a=n("d864"),r=n("63b6"),o=n("241e"),u=n("b0dc"),c=n("3702"),i=n("b447"),s=n("20fd"),l=n("7cd6");r(r.S+r.F*!n("4ee1")((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,r,d,f=o(e),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,b=void 0!==m,v=0,_=l(f);if(b&&(m=a(m,h>2?arguments[2]:void 0,2)),void 0==_||p==Array&&c(_))for(t=i(f.length),n=new p(t);t>v;v++)s(n,v,b?m(f[v],v):f[v]);else for(d=_.call(f),n=new p;!(r=d.next()).done;v++)s(n,v,b?u(d,m,[r.value,v],!0):r.value);return n.length=v,n}})},"54a1":function(e,t,n){n("6c1c"),n("1654"),e.exports=n("95d5")},"57f5":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var a=n("b775"),r=function(e){return Object(a["a"])({url:"/purchase/Purchase_record/getList",method:"post",data:e})},o=function(e){return Object(a["a"])({url:"/purchase/Purchase_record/purCancel",method:"post",data:e})}},"5cf9":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",{staticClass:"my-input",attrs:{placeholder:e.placeholder,clearable:""},on:{change:e.change},model:{value:e.choosesValue,callback:function(t){e.choosesValue=t},expression:"choosesValue"}},e._l(e.list,(function(e,t){return n("el-option",{key:t,attrs:{label:e.s_name,value:e.id}})})),1)},r=[],o=n("01d1"),u={name:"index",props:{placeholder:{type:String,default:"选择供应商"},value:null},data:function(){return{choosesValue:"",list:[]}},methods:{change:function(){this.$emit("input",this.choosesValue)}},watch:{value:{immediate:!0,handler:function(e){this.choosesValue=e}}},beforeCreate:function(){var e=this;Object(o["e"])().then((function(t){200===t.code&&(e.list=t.data)})).catch((function(e){console.log(e)}))}},c=u,i=(n("ede2"),n("2877")),s=Object(i["a"])(c,a,r,!1,null,"408530ba",null);t["default"]=s.exports},"677e":function(e,t,n){},"75fc":function(e,t,n){"use strict";var a=n("a745"),r=n.n(a);function o(e){if(r()(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var u=n("774e"),c=n.n(u),i=n("c8bb"),s=n.n(i);function l(e){if(s()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return c()(e)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(e){return o(e)||l(e)||d()}n.d(t,"a",(function(){return f}))},"774e":function(e,t,n){e.exports=n("d2d5")},"7cd6":function(e,t,n){var a=n("40c3"),r=n("5168")("iterator"),o=n("481b");e.exports=n("584a").getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||o[a(e)]}},"95d5":function(e,t,n){var a=n("40c3"),r=n("5168")("iterator"),o=n("481b");e.exports=n("584a").isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||o.hasOwnProperty(a(t))}},a745:function(e,t,n){e.exports=n("f410")},aa1f:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-cascader",{attrs:{placeholder:e.placeholder,options:e.list,clearable:"",props:{checkStrictly:!0,value:"id",label:"w_name",children:"children"}},on:{change:e.change},model:{value:e.choosesValue,callback:function(t){e.choosesValue=t},expression:"choosesValue"}})},r=[],o=(n("55dd"),n("75fc")),u=n("4ff7"),c={name:"index",props:{placeholder:{type:String,default:"请选择仓库"},value:null},data:function(){return{choosesValue:[],list:[]}},methods:{change:function(){this.$emit("input",this.choosesValue[this.choosesValue.length-1])}},watch:{value:{immediate:!0,handler:function(e){if(e){var t=function e(t,a,r){r.some((function(r){var u=r.children||[];if(r.id===a)return n=t,!0;if(u.length>0){var c=Object(o["a"])(t);return c.push(r.id),e(c,a,u)}}))},n=[];t([],e,this.list),this.choosesValue=[e].concat(Object(o["a"])(n)).sort()}else this.choosesValue=[]}}},beforeCreate:function(){var e=this;Object(u["e"])().then((function(t){200===t.code&&(e.list=t.data)})).catch((function(e){console.log(e)}))}},i=c,s=(n("1e31"),n("2877")),l=Object(s["a"])(i,a,r,!1,null,"1fa4dcec",null);t["default"]=l.exports},b0dc:function(e,t,n){var a=n("e4ae");e.exports=function(e,t,n,r){try{return r?t(a(n)[0],n[1]):t(n)}catch(u){var o=e["return"];throw void 0!==o&&a(o.call(e)),u}}},b775:function(e,t,n){"use strict";var a,r=n("bc3a"),o=n.n(r),u=n("5c96"),c=n("4360"),i=o.a.create({baseURL:"http://ddxm661.com:8088",timeout:3e3});i.interceptors.request.use((function(e){return a=u["Loading"].service({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),"/api"===e.baseURL&&(e.baseURL="http://testadmin2.ddxm661.com"),e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){if(a.close(),200===e.status)return-1==e.data.code&&(c["a"].commit("setUserInfo",{}),window.localStorage.removeItem("router"),window.location.href="#/login",setTimeout((function(){window.location.reload()}),150)),200!=e.data.code&&(u["Message"].closeAll(),Object(u["Message"])({message:e.data.msg,type:"error"})),e.data;Promise.reject()}),(function(e){return a.close(),Promise.reject(e)})),t["a"]=i},c8bb:function(e,t,n){e.exports=n("54a1")},d2d5:function(e,t,n){n("1654"),n("549b"),e.exports=n("584a").Array.from},ede2:function(e,t,n){"use strict";var a=n("677e"),r=n.n(a);r.a},f410:function(e,t,n){n("1af6"),e.exports=n("584a").Array.isArray}}]);