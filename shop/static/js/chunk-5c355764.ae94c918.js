(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c355764"],{"599c":function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"crumbs"},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[e._v("菜单管理")])],1)],1),t("div",{staticClass:"container"},[t("div",{staticStyle:{"margin-bottom":"20px"}},[e.$_has("add")?t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.addDialogShow}},[e._v("添加")]):e._e()],1),t("div",[t("el-tree",{attrs:{data:e.menu,props:e.defaultProps,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":e.renderContent}})],1)]),t("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"编辑",center:"",visible:e.editDialog.visible,width:"40%"},on:{"update:visible":function(a){return e.$set(e.editDialog,"visible",a)}}},[t("el-form",{ref:"editDialog",staticClass:"demo-ruleForm",attrs:{model:e.editDialog.ruleForm,rules:e.editDialog.rules,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"名称",prop:"a_name"}},[t("el-input",{attrs:{clearable:""},model:{value:e.editDialog.ruleForm.a_name,callback:function(a){e.$set(e.editDialog.ruleForm,"a_name",a)},expression:"editDialog.ruleForm.a_name"}})],1),t("el-form-item",{attrs:{label:"模块",prop:"a_module"}},[t("el-input",{attrs:{clearable:""},model:{value:e.editDialog.ruleForm.a_module,callback:function(a){e.$set(e.editDialog.ruleForm,"a_module",a)},expression:"editDialog.ruleForm.a_module"}})],1),t("el-form-item",{attrs:{label:"控制器",prop:"a_controller"}},[t("el-input",{attrs:{clearable:""},model:{value:e.editDialog.ruleForm.a_controller,callback:function(a){e.$set(e.editDialog.ruleForm,"a_controller",a)},expression:"editDialog.ruleForm.a_controller"}})],1),t("el-form-item",{attrs:{label:"操作方法",prop:"a_action"}},[t("el-input",{attrs:{clearable:""},model:{value:e.editDialog.ruleForm.a_action,callback:function(a){e.$set(e.editDialog.ruleForm,"a_action",a)},expression:"editDialog.ruleForm.a_action"}})],1),t("el-form-item",{attrs:{label:"文件请求地址",prop:"a_component"}},[t("el-input",{attrs:{clearable:""},model:{value:e.editDialog.ruleForm.a_component,callback:function(a){e.$set(e.editDialog.ruleForm,"a_component",a)},expression:"editDialog.ruleForm.a_component"}})],1),t("el-form-item",{attrs:{label:"页面请求路由",prop:"a_page_url"}},[t("el-input",{attrs:{clearable:""},model:{value:e.editDialog.ruleForm.a_page_url,callback:function(a){e.$set(e.editDialog.ruleForm,"a_page_url",a)},expression:"editDialog.ruleForm.a_page_url"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.editDialogSubmitForm("editDialog")}}},[e._v("编辑")]),t("el-button",{on:{click:function(a){return e.resetForm("editDialog")}}},[e._v("重置")])],1)],1)],1),t("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"新增",center:"",visible:e.addDialog.isShow,width:"40%"},on:{"update:visible":function(a){return e.$set(e.addDialog,"isShow",a)}}},[t("el-form",{ref:"addDialog",attrs:{model:e.addDialog.requestData,rules:e.addDialog.rules,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"父级",prop:"a_pid"}},[t("el-cascader",{attrs:{placeholder:"未选择表示新增为顶级",options:e.menu,props:{checkStrictly:!0,value:"id",label:"a_name",children:"children"}},model:{value:e.addDialog.requestData.a_pid,callback:function(a){e.$set(e.addDialog.requestData,"a_pid",a)},expression:"addDialog.requestData.a_pid"}})],1),t("el-form-item",{attrs:{label:"类型",prop:"type_id"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"medium"},on:{change:e.addDialogTypeChange},model:{value:e.addDialog.requestData.type_id,callback:function(a){e.$set(e.addDialog.requestData,"type_id",a)},expression:"addDialog.requestData.type_id"}},e._l(e.addDialog.responseData,(function(e,a){return t("el-option",{key:a,attrs:{label:e.h_title,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"名称",prop:"a_name"}},[t("el-input",{attrs:{clearable:""},model:{value:e.addDialog.requestData.a_name,callback:function(a){e.$set(e.addDialog.requestData,"a_name",a)},expression:"addDialog.requestData.a_name"}})],1),t("el-form-item",{attrs:{label:"模块",prop:"a_module"}},[t("el-input",{attrs:{clearable:""},model:{value:e.addDialog.requestData.a_module,callback:function(a){e.$set(e.addDialog.requestData,"a_module",a)},expression:"addDialog.requestData.a_module"}})],1),t("el-form-item",{attrs:{label:"控制器",prop:"a_controller"}},[t("el-input",{attrs:{clearable:""},model:{value:e.addDialog.requestData.a_controller,callback:function(a){e.$set(e.addDialog.requestData,"a_controller",a)},expression:"addDialog.requestData.a_controller"}})],1),t("el-form-item",{attrs:{label:"操作方法",prop:"a_action"}},[t("el-input",{attrs:{clearable:"",disabled:""},model:{value:e.addDialog.requestData.a_action,callback:function(a){e.$set(e.addDialog.requestData,"a_action",a)},expression:"addDialog.requestData.a_action"}})],1),t("el-form-item",{attrs:{label:"文件请求地址",prop:"a_component"}},[t("el-input",{attrs:{clearable:""},model:{value:e.addDialog.requestData.a_component,callback:function(a){e.$set(e.addDialog.requestData,"a_component",a)},expression:"addDialog.requestData.a_component"}})],1),t("el-form-item",{attrs:{label:"页面请求路由",prop:"a_page_url"}},[t("el-input",{attrs:{clearable:""},model:{value:e.addDialog.requestData.a_page_url,callback:function(a){e.$set(e.addDialog.requestData,"a_page_url",a)},expression:"addDialog.requestData.a_page_url"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.addDialogSubmitForm("addDialog")}}},[e._v("立即创建")]),t("el-button",{on:{click:function(a){return e.resetForm("addDialog")}}},[e._v("重置")])],1)],1)],1)],1)},r=[],l=(t("7f7f"),t("b775")),i=function(e){return Object(l["a"])({url:"/systemset/column_manage/add",method:"post",data:e})},n=function(e){return Object(l["a"])({url:"/systemset/column_manage/edit",method:"post",data:e})},s=function(e){return Object(l["a"])({url:"/systemset/column_manage/getList",method:"post",data:e})},d=function(e){return Object(l["a"])({url:"/systemset/column_manage/del",method:"post",data:e})},u={name:"index",data:function(){return{editDialog:{visible:!1,ruleForm:{a_pid:"",a_name:"",a_module:"",a_controller:"",a_action:"",a_level:"",a_component:"",a_page_url:"",type_id:""},rules:{a_name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],a_module:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],a_controller:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],a_action:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],a_component:[{required:!0,message:"请输入路由地址",trigger:"blur"}],a_page_url:[{required:!0,message:"请输入路由地址",trigger:"blur"}]}},menu:[],defaultProps:{children:"children",label:"a_name"},addDialog:{isShow:!1,responseData:[],requestData:{a_pid:[],a_name:"",a_module:"",a_controller:"",a_action:"",a_component:"",a_page_url:"",a_level:"",type_id:""},rules:{a_name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],a_action:[{required:!0,message:"请输入选择类型",trigger:"blur"}],a_component:[{required:!0,message:"请输入组件地址",trigger:"blur"}],a_page_url:[{required:!0,message:"请输入路由地址",trigger:"blur"}],type_id:[{required:!0,message:"请选择类型",trigger:"blur"}]}}}},created:function(){this.getMenu()},methods:{getMenu:function(){var e=this;s().then((function(a){200==a.code&&(e.menu=a.data)}))},resetForm:function(e){this.$refs[e].resetFields()},editDialogShow:function(e,a){var t=this,o=e.data.id;n({id:o}).then((function(e){200==e.code&&(t.editDialog.ruleForm=e.data.info,t.editDialog.visible=!0)}))},editDialogSubmitForm:function(e){var a=this;this.$refs[e].validate((function(e){if(!e)return!1;n(a.editDialog.ruleForm).then((function(e){200==e.code&&(a.editDialog.visible=!1,a.getMenu())}))}))},renderContent:function(e,a){var t=this,o=a.node,r=a.data;a.store;return e("span",{class:"custom-tree-node"},[e("span",{style:"margin-right:10px;size:16px;"},[o.label]),e("span",[this.$_has("edit")?e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return t.editDialogShow(o,r)}}},["编辑 "]):null,this.$_has("del")?e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return t.remove(o,r)}}},["删除 "]):null,r.meta.button_array&&r.meta.button_array.length?r.meta.button_array.map((function(a){return t.$_has("del")?e("el-tag",{style:{margin:"0 5px"},attrs:{type:"danger",closable:!0},on:{close:function(){return t.removeBtn(a)}}},[a.name]):null})):null])])},remove:function(e,a){var t=this,o=e.data.id;this.$confirm("此操作将删除其所有子节点, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){d({id:o}).then((function(e){200==e.code&&(t.$message({type:"success",message:"删除成功!"}),t.getMenu())})).catch((function(e){console.log(e),t.$message.error("操作失败")}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},removeBtn:function(e){var a=this;this.$confirm("此操作将删除该栏目下的该按钮, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){d({id:e.id}).then((function(e){200==e.code&&(a.$message({type:"success",message:"删除成功!"}),a.getMenu())})).catch((function(e){console.log(e),a.$message.error("操作失败")}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},addDialogShow:function(){var e=this;i().then((function(a){200==a.code&&(e.addDialog.responseData=a.data,e.addDialog.isShow=!0)})).catch((function(e){console.log(e)}))},addDialogTypeChange:function(e){var a=this;this.addDialog.responseData.map((function(t){t.id==e&&(a.addDialog.requestData.a_action=t.h_tag,"getlist"!=t.h_tag.toLowerCase()?a.addDialog.requestData.a_name=t.h_title:a.addDialog.requestData.a_name="")}))},addDialogSubmitForm:function(e){var a=this;this.$refs[e].validate((function(t){if(!t)return!1;a.addDialog.requestData.a_pid.length?(a.addDialog.requestData.a_level=a.addDialog.requestData.a_pid.length,a.addDialog.requestData.a_pid=a.addDialog.requestData.a_pid[a.addDialog.requestData.a_pid.length-1]):(a.addDialog.requestData.a_pid=0,a.addDialog.requestData.a_level=0),i(a.addDialog.requestData).then((function(t){200==t.code&&(a.getMenu(),a.resetForm(e),a.addDialog.requestData.a_pid=[],a.addDialog.isShow=!1)})).catch((function(e){console.log(e)}))}))}}},c=u,m=(t("de8a"),t("2877")),g=Object(m["a"])(c,o,r,!1,null,"14f7b0fa",null);a["default"]=g.exports},9996:function(e,a,t){},b775:function(e,a,t){"use strict";var o,r=t("bc3a"),l=t.n(r),i=t("5c96"),n=t("4360"),s=l.a.create({baseURL:"http://ddxm661.com:8088",timeout:5e3});s.interceptors.request.use((function(e){return o=i["Loading"].service({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e}),(function(e){return console.log(e),Promise.reject()})),s.interceptors.response.use((function(e){if(o.close(),200===e.status)return-1==e.data.code&&(n["a"].commit("setUserInfo",{}),window.localStorage.removeItem("router"),window.location.href="#/login",setTimeout((function(){window.location.reload()}),150)),200!=e.data.code&&(i["Message"].closeAll(),Object(i["Message"])({message:e.data.msg,type:"error"})),e.data;Promise.reject()}),(function(e){return o.close(),console.log(e),Promise.reject()})),a["a"]=s},de8a:function(e,a,t){"use strict";var o=t("9996"),r=t.n(o);r.a}}]);